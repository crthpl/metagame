type Face = 'left' | 'top' | 'right'

type PipPaths = {
  [F in Face]: Record<number, string[]>
}

interface DieGenerationOptions {
  allowRepeats?: boolean
  allowZero?: boolean
  allowSevenSum?: boolean
}

/**
 * Generate a random set of values for the three visible faces of a die.
 * @param options Configuration options controlling allowing rpeated numbers, blank faces, and non-opposite faces summing to 7 (all default false)
 * @returns A random die identifier; Record<left | top | right, number>.
 */
const generateRandomDieIdentifier = (options: DieGenerationOptions = {}) => {
  const {
    allowRepeats = false,
    allowZero = false,
    allowSevenSum = false,
  } = options

  const faces: Face[] = ['left', 'top', 'right']
  const values = [1, 2, 3, 4, 5, 6]
  if (allowZero) values.unshift(0)
  const res: Record<Face, number> = { left: 1, top: 1, right: 1 }
  for (const face of faces) {
    const value = values[Math.floor(Math.random() * values.length)]
    // Remove the value from candidate numbers if we aren't repeating
    if (!allowRepeats) {
      const index = values.indexOf(value)
      values.splice(index, 1)
    }
    // If we want a realistic die where opposite faces sum to 7, remove the value's complement
    if (!allowSevenSum) {
      const complement = 7 - value
      const index = values.indexOf(complement)
      values.splice(index, 1)
    }
    res[face] = value
  }
  return res
}

const pipPaths: PipPaths = {
  left: {
    1: [
      'M145.675,335.424c11.158,6.082,20.201,1.967,20.201-9.191c0-11.151-9.044-25.128-20.201-31.204 c-11.158-6.082-20.201-1.967-20.201,9.185C125.474,315.37,134.517,329.341,145.675,335.424z',
    ],
    2: [
      'M103.958,265.785c12.574,5.162,23.463-1.538,24.316-14.964c0.852-13.427-8.654-28.492-21.221-33.654 c-12.568-5.156-23.457,1.537-24.31,14.964C81.891,245.557,91.397,260.629,103.958,265.785z',
      'M202.141,421.758c12.574,5.163,23.457-1.544,24.309-14.964c0.852-13.427-8.647-28.499-21.214-33.655 c-12.574-5.156-23.457,1.537-24.316,14.964C180.067,401.531,189.574,416.602,202.141,421.758z',
    ],
    3: [
      'M89.278,248.303c11.158,6.083,20.208,1.961,20.208-9.19c0-11.158-9.05-25.129-20.208-31.211 c-11.15-6.082-20.194-1.967-20.194,9.191C69.084,228.243,78.128,242.22,89.278,248.303z',
      'M202.064,422.55c11.157,6.082,20.194,1.967,20.194-9.191c0-11.151-9.037-25.128-20.194-31.211 c-11.158-6.076-20.194-1.96-20.194,9.191C181.87,402.497,190.906,416.468,202.064,422.55z',
      'M145.672,335.423c11.157,6.083,20.2,1.968,20.2-9.19c0-11.151-9.043-25.128-20.2-31.204 c-11.158-6.082-20.194-1.967-20.194,9.184C125.478,315.37,134.514,329.341,145.672,335.423z',
    ],
    4: [
      'M89.289,248.303c11.158,6.083,20.194,1.96,20.194-9.19c0-11.158-9.036-25.129-20.194-31.211 c-11.158-6.082-20.208-1.967-20.208,9.191C69.081,228.243,78.131,242.22,89.289,248.303z',
      'M202.061,309.771c11.158,6.082,20.207,1.967,20.207-9.184c0-11.158-9.05-25.135-20.207-31.218 c-11.151-6.075-20.194-1.96-20.194,9.198C181.867,289.718,190.91,303.688,202.061,309.771z',
      'M89.289,361.082c11.158,6.082,20.194,1.967,20.194-9.19c0-11.158-9.036-25.129-20.194-31.211 c-11.158-6.083-20.208-1.967-20.208,9.19C69.081,341.029,78.131,355,89.289,361.082z',
      'M202.061,422.55c11.158,6.082,20.207,1.967,20.207-9.191c0-11.151-9.05-25.128-20.207-31.211 c-11.151-6.076-20.194-1.96-20.194,9.191C181.867,402.497,190.91,416.468,202.061,422.55z',
    ],
    5: [
      'M89.289,248.303c11.158,6.083,20.194,1.961,20.194-9.19c0-11.158-9.036-25.128-20.194-31.21 c-11.157-6.083-20.207-1.967-20.207,9.19C69.081,228.244,78.131,242.221,89.289,248.303z',
      'M202.061,309.771c11.158,6.082,20.208,1.967,20.208-9.184c0-11.157-9.05-25.135-20.208-31.217 c-11.15-6.076-20.194-1.961-20.194,9.198C181.867,289.719,190.911,303.689,202.061,309.771z',
      'M89.289,361.082c11.158,6.076,20.194,1.967,20.194-9.19c0-11.158-9.036-25.129-20.194-31.21 c-11.157-6.083-20.207-1.968-20.207,9.19C69.081,341.029,78.131,355,89.289,361.082z',
      'M202.061,422.55c11.158,6.082,20.208,1.967,20.208-9.191c0-11.151-9.05-25.128-20.208-31.21 c-11.15-6.076-20.194-1.961-20.194,9.19C181.867,402.497,190.911,416.468,202.061,422.55z',
      'M145.675,335.424c11.158,6.082,20.201,1.967,20.201-9.191c0-11.151-9.044-25.128-20.201-31.204 c-11.158-6.082-20.201-1.967-20.201,9.185C125.474,315.37,134.517,329.341,145.675,335.424z',
    ],
    6: [
      'M89.289,198.174c11.158,6.083,20.201,20.053,20.201,31.21c0,11.151-9.043,15.266-20.201,9.191 c-11.15-6.082-20.2-20.06-20.2-31.211C69.089,196.207,78.139,192.091,89.289,198.174z',
      'M89.289,263.945c11.158,6.083,20.201,20.053,20.201,31.21c0,11.158-9.043,15.273-20.201,9.191 c-11.15-6.082-20.2-20.059-20.2-31.21C69.089,261.985,78.139,257.863,89.289,263.945z',
      'M202.061,296.257c-11.151-6.083-20.201-20.053-20.201-31.211c0-11.158,9.05-15.273,20.201-9.191 c11.164,6.083,20.201,20.053,20.201,31.211C222.262,298.224,213.225,302.339,202.061,296.257z',
      'M89.289,329.723c11.158,6.076,20.201,20.053,20.201,31.204c0,11.158-9.043,15.273-20.201,9.19 c-11.15-6.082-20.2-20.053-20.2-31.21C69.089,327.756,78.139,323.641,89.289,329.723z',
      'M202.061,387.399c11.164,6.089,20.201,20.06,20.201,31.21c0,11.158-9.036,15.273-20.201,9.19 c-11.151-6.075-20.201-20.052-20.201-31.21C181.86,385.438,190.91,381.323,202.061,387.399z',
      'M202.061,321.627c11.157,6.083,20.194,20.053,20.194,31.211c0,11.158-9.036,15.273-20.194,9.191 c-11.158-6.083-20.208-20.053-20.208-31.211C181.853,319.66,190.903,315.544,202.061,321.627z',
    ],
  },
  right: {
    1: [
      'M361.948,295.028c-11.158,6.076-20.208,20.053-20.208,31.204c0,11.158,9.05,15.273,20.208,9.19 c11.158-6.082,20.194-20.052,20.194-31.21C382.142,293.061,373.106,288.946,361.948,295.028z',
    ],
    2: [
      'M418.341,207.902c-11.158,6.082-20.208,20.053-20.208,31.21c0,11.151,9.05,15.273,20.208,9.19 c11.144-6.082,20.194-20.059,20.194-31.21C438.535,205.935,429.486,201.819,418.341,207.902z',
      'M305.555,382.149c-11.158,6.082-20.194,20.059-20.194,31.21c0,11.158,9.036,15.273,20.194,9.191 c11.158-6.082,20.194-20.053,20.194-31.211C325.749,380.188,316.714,376.074,305.555,382.149z',
    ],
    3: [
      'M418.341,207.902c-11.158,6.082-20.208,20.053-20.208,31.21c0,11.151,9.05,15.273,20.208,9.19 c11.144-6.082,20.194-20.059,20.194-31.21C438.535,205.935,429.486,201.819,418.341,207.902z',
      'M305.555,382.149c-11.158,6.082-20.194,20.059-20.194,31.21c0,11.158,9.036,15.273,20.194,9.191 c11.158-6.082,20.194-20.053,20.194-31.211C325.749,380.188,316.714,376.074,305.555,382.149z',
      'M361.948,295.028c-11.158,6.076-20.207,20.053-20.207,31.204c0,11.158,9.05,15.273,20.207,9.191 c11.158-6.083,20.194-20.053,20.194-31.21C382.142,293.062,373.106,288.947,361.948,295.028z',
    ],
    4: [
      'M418.335,207.902c-11.158,6.082-20.208,20.053-20.208,31.21c0,11.151,9.05,15.266,20.208,9.19 c11.151-6.082,20.194-20.059,20.194-31.21C438.529,205.934,429.486,201.819,418.335,207.902z',
      'M305.552,269.37c-11.161,6.082-20.201,20.06-20.201,31.21c0,11.158,9.04,15.273,20.201,9.191 c11.155-6.082,20.198-20.053,20.198-31.211C325.749,267.409,316.707,263.294,305.552,269.37z',
      'M418.335,320.681c-11.158,6.082-20.208,20.052-20.208,31.204c0,11.158,9.05,15.273,20.208,9.197 c11.151-6.082,20.194-20.06,20.194-31.21C438.529,318.714,429.486,314.598,418.335,320.681z',
      'M305.552,382.149c-11.161,6.082-20.201,20.059-20.201,31.21c0,11.158,9.04,15.273,20.201,9.191 c11.155-6.083,20.198-20.053,20.198-31.211C325.749,380.188,316.707,376.074,305.552,382.149z',
    ],
    5: [
      'M418.341,207.901c-11.158,6.082-20.207,20.053-20.207,31.211c0,11.151,9.05,15.266,20.207,9.19 c11.144-6.082,20.194-20.06,20.194-31.21C438.535,205.934,429.485,201.819,418.341,207.901z',
      'M305.555,269.369c-11.158,6.083-20.194,20.06-20.194,31.211c0,11.158,9.036,15.273,20.194,9.191 c11.158-6.083,20.194-20.053,20.194-31.211C325.75,267.409,316.713,263.294,305.555,269.369z',
      'M418.341,320.68c-11.158,6.082-20.207,20.053-20.207,31.211c0,11.15,9.05,15.266,20.207,9.19 c11.144-6.082,20.194-20.06,20.194-31.211C438.535,318.714,429.485,314.598,418.341,320.68z',
      'M305.555,382.148c-11.158,6.083-20.194,20.06-20.194,31.211c0,11.158,9.036,15.273,20.194,9.191 c11.158-6.083,20.194-20.053,20.194-31.211C325.75,380.188,316.713,376.073,305.555,382.148z',
      'M361.948,295.028c-11.158,6.076-20.208,20.053-20.208,31.204c0,11.158,9.05,15.273,20.208,9.19 c11.158-6.082,20.194-20.052,20.194-31.21C382.142,293.061,373.106,288.946,361.948,295.028z',
    ],
    6: [
      'M412.578,198.174c-11.158,6.083-20.201,20.053-20.201,31.21c0,11.151,9.043,15.266,20.201,9.191 c11.15-6.082,20.2-20.06,20.2-31.211C432.778,196.207,423.728,192.091,412.578,198.174z',
      'M412.578,263.945c-11.158,6.083-20.201,20.053-20.201,31.21c0,11.158,9.043,15.273,20.201,9.191 c11.15-6.082,20.2-20.059,20.2-31.21C432.778,261.985,423.728,257.863,412.578,263.945z',
      'M314.4,296.257c11.151-6.083,20.201-20.053,20.201-31.211c0-11.158-9.05-15.273-20.201-9.191 c-11.164,6.083-20.201,20.053-20.201,31.211C294.199,298.224,303.236,302.339,314.4,296.257z',
      'M412.578,329.723c-11.158,6.076-20.201,20.053-20.201,31.204c0,11.158,9.043,15.273,20.201,9.19 c11.15-6.082,20.2-20.053,20.2-31.21C432.778,327.756,423.728,323.641,412.578,329.723z',
      'M314.4,387.399c-11.164,6.089-20.201,20.06-20.201,31.21c0,11.158,9.036,15.273,20.201,9.19 c11.151-6.075,20.201-20.052,20.201-31.21C334.601,385.438,325.551,381.323,314.4,387.399z',
      'M315.602,321.627c-11.157,6.083-20.194,20.053-20.194,31.211c0,11.158,9.036,15.273,20.194,9.191 c11.158-6.083,20.208-20.053,20.208-31.211C335.81,319.66,326.76,315.544,315.602,321.627z',
    ],
  },
  top: {
    1: [
      'M273.354,115.102c-9.5-7.029-25.135-7.21-34.944-0.396c-9.802,6.814-10.043,18.039-0.551,25.068 c9.5,7.028,25.142,7.21,34.95,0.396C282.605,133.356,282.854,122.131,273.354,115.102z',
    ],
    2: [
      'M367.96,114.498c-10.809-8.01-28.626-8.204-39.784-0.45c-11.158,7.754-11.44,20.543-0.631,28.546 c10.822,8.002,28.626,8.203,39.784,0.45C378.487,135.282,378.769,122.507,367.96,114.498z',
      'M183.676,112.289c-10.816-8.003-28.626-8.211-39.784-0.45c-11.158,7.754-11.44,20.536-0.631,28.538 c10.808,8.009,28.626,8.204,39.784,0.456C194.203,133.067,194.484,120.291,183.676,112.289z',
    ],
    3: [
      'M382.343,115.779c-9.828-7.284-26.022-7.465-36.159-0.416c-10.15,7.049-10.405,18.677-0.577,25.948 c9.828,7.277,26.022,7.466,36.159,0.416C391.917,134.671,392.172,123.057,382.343,115.779z',
      'M165.62,113.564c-9.828-7.278-26.022-7.459-36.172-0.41c-10.137,7.056-10.392,18.67-0.571,25.948 c9.835,7.284,26.028,7.459,36.165,0.416C175.194,132.456,175.449,120.842,165.62,113.564z',
      'M273.358,115.102c-9.493-7.029-25.136-7.21-34.937-0.396c-9.801,6.814-10.056,18.039-0.557,25.068 c9.499,7.028,25.142,7.21,34.943,0.396C282.609,133.356,282.864,122.131,273.358,115.102z',
    ],
    4: [
      'M275.519,44.678c-9.829-7.27-26.021-7.459-36.172-0.403c-10.137,7.049-10.392,18.677-0.564,25.948 c9.828,7.277,26.021,7.459,36.158,0.41C285.093,63.576,285.348,51.961,275.519,44.678z',
      'M382.344,115.773c-9.829-7.278-26.022-7.459-36.159-0.41c-10.151,7.049-10.406,18.677-0.578,25.948 c9.829,7.277,26.022,7.459,36.159,0.416C391.917,134.664,392.172,123.057,382.344,115.773z',
      'M165.621,113.564c-9.829-7.278-26.022-7.459-36.172-0.41c-10.137,7.056-10.393,18.67-0.57,25.948 c9.834,7.284,26.028,7.459,36.165,0.41C175.194,132.456,175.449,120.842,165.621,113.564z',
      'M272.444,184.653c-9.828-7.278-26.021-7.459-36.172-0.41c-10.137,7.056-10.392,18.67-0.564,25.948 c9.829,7.284,26.022,7.465,36.172,0.409C282.018,203.551,282.273,191.93,272.444,184.653z',
    ],
    5: [
      'M275.522,44.678c-9.828-7.27-26.028-7.459-36.172-0.403c-10.144,7.049-10.399,18.677-0.57,25.948 c9.835,7.277,26.022,7.465,36.166,0.41C285.083,63.576,285.351,51.961,275.522,44.678z',
      'M382.34,115.78c-9.828-7.284-26.021-7.466-36.165-0.417c-10.137,7.049-10.399,18.677-0.57,25.948 c9.835,7.277,26.021,7.459,36.165,0.416C391.914,134.664,392.175,123.057,382.34,115.78z',
      'M165.617,113.564c-9.829-7.278-26.021-7.459-36.165-0.41c-10.151,7.056-10.406,18.67-0.577,25.948 c9.828,7.284,26.022,7.459,36.172,0.41C175.183,132.456,175.445,120.842,165.617,113.564z',
      'M272.441,184.653c-9.836-7.278-26.028-7.459-36.165-0.41c-10.144,7.056-10.406,18.67-0.572,25.947 c9.836,7.284,26.015,7.466,36.166,0.41C282.008,203.551,282.27,191.937,272.441,184.653z',
      'M273.354,115.102c-9.5-7.029-25.135-7.21-34.944-0.396c-9.802,6.814-10.043,18.039-0.551,25.068 c9.5,7.028,25.142,7.21,34.95,0.396C282.605,133.356,282.854,122.131,273.354,115.102z',
    ],
    6: [
      'M160.209,119.875c-9.828-7.278-26.021-7.465-36.165-0.41c-10.144,7.056-10.399,18.67-0.57,25.947 c9.828,7.277,26.022,7.459,36.159,0.41C169.783,138.766,170.038,127.152,160.209,119.875z',
      'M279.159,48.686c-9.829-7.277-26.022-7.458-36.172-0.403c-10.137,7.049-10.393,18.664-0.564,25.941 c9.829,7.284,26.022,7.458,36.159,0.416C288.732,67.578,288.987,55.963,279.159,48.686z',
      'M220.59,82.024c-9.834-7.27-26.028-7.458-36.172-0.403c-10.15,7.049-10.406,18.664-0.571,25.941 c9.829,7.284,26.022,7.458,36.166,0.416C230.151,100.916,230.412,89.302,220.59,82.024z',
      'M267.437,184.754c-9.828-7.277-26.015-7.459-36.159-0.41c-10.15,7.056-10.405,18.671-0.577,25.947 c9.828,7.284,26.021,7.459,36.172,0.41C277.01,203.645,277.265,192.031,267.437,184.754z',
      'M386.385,113.564c-9.828-7.271-26.021-7.458-36.158-0.403c-10.151,7.049-10.406,18.664-0.577,25.941 c9.828,7.284,26.02,7.458,36.172,0.416C395.959,132.456,396.214,120.842,386.385,113.564z',
      'M327.817,146.903c-9.829-7.27-26.022-7.458-36.172-0.403c-10.137,7.049-10.392,18.664-0.564,25.941 c9.828,7.284,26.021,7.465,36.158,0.416C337.391,165.795,337.646,154.188,327.817,146.903z',
    ],
  },
}

export { generateRandomDieIdentifier, pipPaths }
export type { Face, DieGenerationOptions }
